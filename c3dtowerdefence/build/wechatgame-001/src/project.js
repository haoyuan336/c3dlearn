System.register("chunks:///BaseObject.js",["./_virtual/_rollupPluginBabelHelpers.js","cc"],(function(e,t){var i,o,r,s,n,c,a,l,u,p,d,b,f,y,v,h,m,_,j,C,G,N,T,g;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_temp:void 0}),{setters:[function(e){i=e.applyDecoratedDescriptor,o=e.inherits,r=e.classCallCheck,s=e.possibleConstructorReturn,n=e.getPrototypeOf,c=e.initializerDefineProperty,a=e.assertThisInitialized,l=e.createClass},function(e){u=e.cclegacy,p=e._decorator,d=e.Node,b=e.CCFloat,f=e.Component}],execute:function(){u._RF.push({},"f047fSpjWxIyqfTRsf+Ksl/","BaseObject",void 0),T=p.ccclass,g=p.property,e("BaseObject",(y=T("BaseObject"),v=g({type:""}),h=g({type:d}),m=g({type:b}),y((C=i((j=function(e){function t(){var e,i;r(this,t);for(var o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];return i=s(this,(e=n(t)).call.apply(e,[this].concat(l))),c(i,"objectType",C,a(i)),c(i,"rootNode",G,a(i)),c(i,"animSpeedMulOffset",N,a(i)),i.baseGasNum=0,i.currentGasNum=0,i.moveSpeed=0,i.isCollisionGround=!1,i}return o(t,e),l(t,[{key:"init",value:function(e,t,i){this.baseGasNum=e[this.objectType].BaseGasNum,this.currentGasNum=this.baseGasNum,e[this.objectType].MoveSpeed&&(this.moveSpeed=e[this.objectType].MoveSpeed),e[this.objectType].isCollisionGround&&(this.isCollisionGround=e[this.objectType].isCollisionGround)}}]),t}(f)).prototype,"objectType",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),G=i(j.prototype,"rootNode",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=i(j.prototype,"animSpeedMulOffset",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),_=j))||_)),u._RF.pop()}}}));

System.register("chunks:///util/State.js",["../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(t,e){var a,s,n;return{setters:[function(t){a=t.createClass,s=t.classCallCheck},function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"309b9GENMFDhItBZDPdMuEd","State",void 0),t("State",function(){function t(){s(this,t),this.state="",this.handleMap={}}return a(t,[{key:"setState",value:function(t){if(this.state=t,this.handleMap[this.state]){for(var e=this.handleMap[this.state],a=[],s=1;s<arguments.length;s++)a.push(arguments[s]);for(var n=0;n<e.length;n++){var i=e[n];i.apply(this,a)}}}},{key:"getState",value:function(){return this.state}},{key:"addState",value:function(t,e){this.handleMap[t]?this.handleMap[t].push(e):this.handleMap[t]=[e]}}]),t}()),n._RF.pop()}}}));

System.register("chunks:///TowerBuildBase/TowerBuildBase.js",["../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(e,o){var t,r,n,a,l,i,s,u,c,d,m,g,h,p;return e({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(e){t=e.inherits,r=e.classCallCheck,n=e.possibleConstructorReturn,a=e.getPrototypeOf,l=e.createClass},function(e){i=e.cclegacy,s=e._decorator,u=e.find,c=e.CameraComponent,d=e.isValid,m=e.Component}],execute:function(){i._RF.push({},"bf2b5yrz6pN7ZEPmB5V4xlb","TowerBuildBase",void 0),p=s.ccclass,s.property,e("TowerBuildBase",(g=p("TowerBuildBase"),g(h=function(e){function o(){var e,t;r(this,o);for(var l=arguments.length,i=new Array(l),s=0;s<l;s++)i[s]=arguments[s];return(t=n(this,(e=a(o)).call.apply(e,[this].concat(i)))).cameraNodeCom=null,t.gameController=null,t.targetTower=null,t}return t(o,e),l(o,[{key:"start",value:function(){var e=this;this.gameController=u("GameController"),this.cameraNodeCom=u("Camera").getComponent(c),this.gameController.on("touch-screen-to-3d",(function(o){o.node&&o.node.uuid===e.node.uuid&&!d(e.targetTower)&&(console.log("点中了 此塔座"),e.gameController.emit("touch-base-build-base",e.node))}))}},{key:"unSetTargetTower",value:function(){this.targetTower=void 0}},{key:"setTargetTower",value:function(e){this.targetTower=e,this.node.active=!1}}]),o}(m))||h)),i._RF.pop()}}}));

System.register("chunks:///util/My2Array.js",["../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(t,e){var u,n,s,i;return{setters:[function(t){u=t.createClass,n=t.classCallCheck},function(t){s=t.cclegacy}],execute:function(){s._RF.push({},"5a822YVyJlDnb5+nCIOK0H/","My2Array",void 0),i=function(){function t(){n(this,t),this.numberList=[],this.heightNum=0}return u(t,[{key:"pushValue",value:function(t){this.numberList[this.numberList.length-1].push(t)}},{key:"pushList",value:function(t){this.numberList.push(t)}},{key:"getValue",value:function(t,e){return e>=this.numberList.length?null:t>=this.numberList[e].length?null:this.numberList[e][t]}},{key:"setValue",value:function(t,e,u){this.numberList[t][e]=u}}]),t}(),s._RF.pop(),t("default",i)}}}));

System.register("chunks:///GroundTiled/GroundTiled.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../BaseObject.js"],(function(t,e){var r,n,s,i,c,a,u,o,l,p,h,d;return t({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(t){r=t.inherits,n=t.classCallCheck,s=t.possibleConstructorReturn,i=t.getPrototypeOf,c=t.createClass},function(t){a=t.cclegacy,u=t._decorator,o=t.v2},function(t){l=t.BaseObject}],execute:function(){a._RF.push({},"75b72ybo0hO5rMJsDKDP6W5","GroundTiled",void 0),d=u.ccclass,u.property,t("GroundTiled",(p=d("GroundTiled"),p(h=function(t){function e(){var t,r;n(this,e);for(var c=arguments.length,a=new Array(c),u=0;u<c;u++)a[u]=arguments[u];return(r=s(this,(t=i(e)).call.apply(t,[this].concat(a)))).mapX=0,r.mapY=0,r.targetObjectList=[],r}return r(e,t),c(e,[{key:"getIsVoid",value:function(){return 0===this.targetObjectList.length}},{key:"setMapXY",value:function(t,e){this.mapX=t,this.mapY=e}},{key:"getMapXY",value:function(){return o(this.mapX,this.mapY)}},{key:"getTargetObjectList",value:function(){return this.targetObjectList}},{key:"setTargetObject",value:function(t){this.targetObjectList.push(t)}}]),e}(l))||h)),a._RF.pop()}}}));

System.register("chunks:///GroundMapCtl.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./util/My2Array.js","./GroundTiled/GroundTiled.js"],(function(e,t){var i,r,n,o,a,s,d,l,u,p,h,c,f,v,m,g,y,b,w,M,T,_,C,z,P,x,k,E,H,L,G,W,A,I,N;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_dec6:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_temp:void 0}),{setters:[function(e){i=e.applyDecoratedDescriptor,r=e.inherits,n=e.classCallCheck,o=e.possibleConstructorReturn,a=e.getPrototypeOf,s=e.initializerDefineProperty,d=e.assertThisInitialized,l=e.createClass},function(e){u=e.cclegacy,p=e._decorator,h=e.Prefab,c=e.CCInteger,f=e.CCFloat,v=e.instantiate,m=e.v3,g=e.v2,y=e.Tween,b=e.Component},function(e){w=e.default},function(e){M=e.GroundTiled}],execute:function(){u._RF.push({},"44e5akPt5hEHpdS1j2qoO/6","GroundMapCtl",void 0),I=p.ccclass,N=p.property,e("GroundMapCtl",(T=I("GroundMapCtl"),_=N({type:h}),C=N({type:c}),z=N({type:c}),P=N({type:f}),x=N({type:h}),T((H=i((E=function(e){function t(){var e,i;n(this,t);for(var r=arguments.length,l=new Array(r),u=0;u<r;u++)l[u]=arguments[u];return i=o(this,(e=a(t)).call.apply(e,[this].concat(l))),s(i,"groundMapTiledPrefab",H,d(i)),s(i,"mapWidth",L,d(i)),s(i,"mapHeight",G,d(i)),s(i,"tiledSize",W,d(i)),i.mapNodeList=new w,s(i,"treePrefab",A,d(i)),i.groundTiledEdageIndexList=[],i}return r(t,e),l(t,[{key:"start",value:function(){for(var e=0;e<this.mapHeight;e++){for(var t=[],i=0;i<this.mapWidth;i++){var r=v(this.groundMapTiledPrefab);r.parent=this.node;var n=m(-.5*(this.mapWidth-1)*this.tiledSize+i*this.tiledSize,-6,-.5*(this.mapHeight-1)*this.tiledSize+e*this.tiledSize);r.setPosition(n),r.active=!1,t.push(r)}this.mapNodeList.pushList(t)}for(var o=[],a=0;a<this.mapWidth;a++)o.push(g(a,0));for(var s=1;s<this.mapHeight;s++)o.push(g(this.mapWidth-1,s));for(var d=this.mapWidth-2;d>=0;d--)o.push(g(d,this.mapHeight-1));for(var l=this.mapHeight-2;l>0;l--)o.push(g(0,l));this.groundTiledEdageIndexList=o}},{key:"getInEdageIndexList",value:function(){return this.groundTiledEdageIndexList}},{key:"showTreeEnterAnim",value:function(e){return console.log("show tree enter anima"),new Promise((function(t,i){e.active=!0,e.scale=m(1,0,1);var r=new y(e);r.to(.2,{scale:m(1,1,1)},{easing:"elasticOut"}),r.call((function(){t()})),r.start()}))}},{key:"showGroundEnterAnim",value:function(){var e=this;return this.showGroundTiledEnterAnim().then((function(){for(var t=0;t<2;){var i=[0,e.mapHeight-1][Math.round(1*Math.random())],r=Math.round(Math.random()*(e.mapWidth-1)),n=e.mapNodeList.getValue(r,i);if(n&&n.getComponent(M)){var o=n.getComponent(M);if(o.getIsVoid()){var a=v(e.treePrefab);a.parent=e.node,o.setTargetObject(a),a.active=!1,a.position=m(n.position.x,0,n.position.z),e.showTreeEnterAnim(a),t++}}}}))}},{key:"setTowerBuildBaseOnTiled",value:function(e,t,i){var r=this.mapNodeList.getValue(t,i);r&&r.getComponent(M)&&r.getComponent(M).setTargetObject(e)}},{key:"showGroundTiledEnterAnim",value:function(){for(var e=g(Math.floor(this.mapWidth/2),Math.floor(this.mapHeight/2)+1),t=0,i=g(0,-1),r=1,n=0,o=0,a=[];e.x<=this.mapWidth+1&&e.y<=this.mapHeight+1&&e.x>=0&&e.y>=0;){for(var s=0;s<r;){s++;var d=this.mapNodeList.getValue(e.x,e.y);d&&(a.push(this.showEnterAnim(d,o)),o++),e.add(i)}var l=2*Math.PI/4*t;(i=g(0,1).rotate(l).normalize()).x=i.x<0&&Math.abs(i.x)<1?0:Math.floor(i.x),i.y=i.y<0&&Math.abs(i.y)<1?0:Math.floor(i.y),2==n&&(n=0,r++),n++,t++}return Promise.all(a)}},{key:"showEnterAnim",value:function(e,t){return new Promise((function(i,r){var n=new y(e),o=e.position;n.delay(.03*t),n.call((function(){e.active=!0})),n.to(.4,{position:m(o.x,0,o.z)},{easing:"elasticOut"}),n.call((function(){i()})),n.start()}))}},{key:"getMapNodeList",value:function(){return this.mapNodeList}},{key:"getOneRandomVoidTiledNode",value:function(){}}]),t}(b)).prototype,"groundMapTiledPrefab",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=i(E.prototype,"mapWidth",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),G=i(E.prototype,"mapHeight",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),W=i(E.prototype,"tiledSize",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),A=i(E.prototype,"treePrefab",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=E))||k)),u._RF.pop()}}}));

System.register("chunks:///EnemyController.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./util/State.js","./GroundTiled/GroundTiled.js","./GroundMapCtl.js","./Enemys/EnemyBase.js"],(function(e,t){var n,i,r,o,a,s,u,d,l,c,m,y,p,v,h,f,g,C,E,L,b,_,w,N,x,P,T,D,I,R,W,k,j;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_temp:void 0}),{setters:[function(e){n=e.applyDecoratedDescriptor,i=e.inherits,r=e.classCallCheck,o=e.possibleConstructorReturn,a=e.getPrototypeOf,s=e.initializerDefineProperty,u=e.assertThisInitialized,d=e.createClass},function(e){l=e.cclegacy,c=e._decorator,m=e.JsonAsset,y=e.Prefab,p=e.Node,v=e.v3,h=e.instantiate,f=e.Component},function(e){g=e.State},function(e){C=e.GroundTiled},function(e){E=e.GroundMapCtl},function(e){L=e.EnemyBase}],execute:function(){l._RF.push({},"9eb73bkCLlAgoJJ0ubFFvcV","EnemyController",void 0),k=c.ccclass,j=c.property,e("EnemyController",(b=k("EnemyController"),_=j({type:m}),w=j({type:y}),N=j({type:p}),x=j({type:p}),b((D=n((T=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,d=new Array(i),l=0;l<i;l++)d[l]=arguments[l];return n=o(this,(e=a(t)).call.apply(e,[this].concat(d))),s(n,"gameConfigRes",D,u(n)),s(n,"enemysPrefabList",I,u(n)),n.gameConfig=null,n.currentLevelNum=0,n.currentEnemyIndex=0,n.currentWaveIndex=0,n.waveData=null,n.state=new g,n.currentAddEnemyTime=0,n.addEnemyDuraction=1,n.enemyNodeList=[],n.currentRandomEnemyTypeList=[],s(n,"startPosNodeList",R,u(n)),n.endPos=null,s(n,"enemyHealthBarCtlNode",W,u(n)),n.currentWaveTime=0,n.currentWaveDuraction=1,n}return i(t,e),d(t,[{key:"start",value:function(){var e=this;this.gameConfig=this.gameConfigRes.json,this.waveData=this.gameConfig["Level_"+this.currentLevelNum],this.endPos=v(0,0,0),this.state.addState("enter-next-wave",(function(){if(e.currentWaveIndex==e.waveData.EnemyType.length)return e.state.setState("add-enemt-over"),void console.log("游戏结束");e.currentRandomEnemyTypeList=e.waveData.EnemyType[e.currentWaveIndex],e.addEnemyDuraction=e.waveData.AddEnemyDuraction[e.currentWaveIndex],e.node.emit("refer-current-wave",e.currentWaveIndex+1),e.addOneWaveEnemy().then((function(){e.currentWaveIndex++,e.scheduleOnce((function(){e.state.setState("enter-next-wave")}),3)}))}))}},{key:"startGame",value:function(){this.state.setState("enter-next-wave")}},{key:"addOneWaveEnemy",value:function(){for(var e=[],t=0,n=this.node.getComponent(E).getInEdageIndexList(),i=this.node.getComponent(E).getMapNodeList(),r=Math.round(Math.random()*(n.length-1)),o=0,a=0,s=0,u=0;u<this.currentRandomEnemyTypeList.length;u++)s+=this.currentRandomEnemyTypeList[u].count;if(!(s>=n.length)){for(;t<s;){r>=n.length&&(r=0);var d=n[r],l=i.getValue(d.x,d.y);if(l&&l.getComponent(C)){if(l.getComponent(C).getIsVoid()){var c=this.currentRandomEnemyTypeList[o],m=c.type;a>=c.count&&(a=0,o++);var y=h(this.enemysPrefabList[m]);y.parent=this.node,y.position=v(l.position.x,20,l.position.z),y.active=!1,y.getComponent(L).init(this.gameConfig,l.position,this.endPos),e.push(y.getComponent(L).showEnemyEnterAnim(t,this)),t++,this.enemyNodeList.push(y)}r=Math.round(Math.random()*(n.length-1))}else t++}return Promise.all(e)}console.error("数据错误")}},{key:"removeEnemyInList",value:function(e){for(var t=0;t<this.enemyNodeList.length;t++){this.enemyNodeList[t].uuid===e.uuid&&this.enemyNodeList.splice(t,1)}}},{key:"getCurrentEnemyNodeList",value:function(){return this.enemyNodeList}}]),t}(f)).prototype,"gameConfigRes",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=n(T.prototype,"enemysPrefabList",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),R=n(T.prototype,"startPosNodeList",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),W=n(T.prototype,"enemyHealthBarCtlNode",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=T))||P)),l._RF.pop()}}}));

System.register("chunks:///TowerBuildBaseCtl.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./GroundMapCtl.js"],(function(e,t){var i,o,n,r,s,a,l,u,c,d,p,f,h,B,v,w,g,y,C,T,m,_,b,P;return e({_dec:void 0,_dec2:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_temp:void 0}),{setters:[function(e){i=e.applyDecoratedDescriptor,o=e.inherits,n=e.classCallCheck,r=e.possibleConstructorReturn,s=e.getPrototypeOf,a=e.initializerDefineProperty,l=e.assertThisInitialized,u=e.createClass},function(e){c=e.cclegacy,d=e._decorator,p=e.Prefab,f=e.v2,h=e.instantiate,B=e.v3,v=e.Tween,w=e.Component},function(e){g=e.GroundMapCtl}],execute:function(){c._RF.push({},"09d8fCuijNMwIzg+sejpSkn","TowerBuildBaseCtl",void 0),b=d.ccclass,P=d.property,e("TowerBuildBaseCtl",(y=b("TowerBuildBaseCtl"),C=P({type:p}),y((_=i((m=function(e){function t(){var e,i;n(this,t);for(var o=arguments.length,u=new Array(o),c=0;c<o;c++)u[c]=arguments[c];return i=r(this,(e=s(t)).call.apply(e,[this].concat(u))),a(i,"towerBuildBasePrefab",_,l(i)),i.groundTiledNodeList=null,i.towerBuildBaseList=[],i}return o(t,e),u(t,[{key:"showTowerBuildBaseEnterAnim",value:function(){var e=[f(4,4),f(4,6),f(6,4),f(6,6)];this.groundTiledNodeList=this.node.getComponent(g).getMapNodeList();for(var t=[],i=0;i<e.length;i++){var o=e[i],n=this.groundTiledNodeList.getValue(o.x,o.y),r=h(this.towerBuildBasePrefab);r.parent=this.node,r.position=B(n.position.x,20,n.position.z),this.node.getComponent(g).setTowerBuildBaseOnTiled(r,o.x,o.y),this.towerBuildBaseList.push(r),t.push(this.showEnterAnim(r,i))}return Promise.all(t)}},{key:"showEnterAnim",value:function(e,t){return e.active=!1,new Promise((function(i,o){var n=new v(e),r=e.position;n.delay(.2*t),n.call((function(){e.active=!0})),n.to(.5,{position:B(r.x,0,r.z)},{easing:"bounceOut"}),n.call((function(){i()})),n.start()}))}}]),t}(w)).prototype,"towerBuildBasePrefab",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=m))||T)),c._RF.pop()}}}));

System.register("chunks:///GameController.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./util/State.js","./TowerBuildBase/TowerBuildBase.js","./GroundMapCtl.js","./EnemyController.js","./TowerBuildBaseCtl.js"],(function(e,t){var n,o,r,i,a,s,u,l,c,d,p,m,f,h,v,y,g,b,B,C,w,_,S,P,G,N,k,z,I,T,A,L,j,E,x,H,J,M,O,R,D,F,Y;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_dec6:void 0,_dec7:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_descriptor6:void 0,_class3:void 0,_temp:void 0}),{setters:[function(e){n=e.applyDecoratedDescriptor,o=e.inherits,r=e.classCallCheck,i=e.possibleConstructorReturn,a=e.getPrototypeOf,s=e.initializerDefineProperty,u=e.assertThisInitialized,l=e.createClass},function(e){c=e.cclegacy,d=e._decorator,p=e.Node,m=e.JsonAsset,f=e.Prefab,h=e.PhysicsSystem,v=e.instantiate,y=e.v3,g=e.Tween,b=e.SkeletalAnimationComponent,B=e.Component},function(e){C=e.State},function(e){w=e.TowerBuildBase},function(e){_=e.GroundMapCtl},function(e){S=e.EnemyController},function(e){P=e.TowerBuildBaseCtl}],execute:function(){c._RF.push({},"5b4c0ApYS1B3bhehBCF/cvX","GameController",void 0),F=d.ccclass,Y=d.property,e("GameController",(G=F("GameController"),N=Y({type:p}),k=Y({type:m}),z=Y({type:f}),I=Y({type:p}),T=Y({type:p}),A=Y({type:f}),G((D=R=function(e){function t(){var e,n;r(this,t);for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];return n=i(this,(e=a(t)).call.apply(e,[this].concat(l))),s(n,"enemyHealthBarCtlNode",E,u(n)),s(n,"gameConfigJson",x,u(n)),s(n,"towersPrefabList",H,u(n)),s(n,"startGameButton",J,u(n)),n.state=new C,n.currentLevelNum=0,s(n,"gameStartButtonBase",M,u(n)),s(n,"homeIconPrefab",O,u(n)),n.homeIconNode=null,n}return o(t,e),l(t,[{key:"start",value:function(){var e=this;h.instance.enable=!0,this.state.addState("ready",(function(){console.log("enter state ",e.state.getState())})),this.state.setState("ready"),this.node.on("build-one-tower",(function(t,n){if(t<e.towersPrefabList.length){var o=v(e.towersPrefabList[t]);o.parent=e.node;var r=y(n.position.x,0,n.position.z);o.setPosition(r),n.getComponent(w).setTargetTower(o)}})),this.state.addState("play-start-button-anim",(function(){e.playStatrButtonPressAnim().then((function(){return new Promise((function(t,n){new g(e.startGameButton).by(1,{position:y(0,-10,0)}).call((function(){console.log("play over"),e.startGameButton.destroy(),t()})).start()}))})).then((function(){var t=new g(e.gameStartButtonBase);return t.to(.2,{scale:y(0,0,0)}),t.call((function(){e.gameStartButtonBase.destroy()})),t.start(),e.node.getComponent(_).showGroundEnterAnim()})).then((function(){return e.node.getComponent(P).showTowerBuildBaseEnterAnim()})).then((function(){return e.showHomeIconEnterAnim()})).then((function(){e.node.getComponent(S).startGame()}))}))}},{key:"showHomeIconEnterAnim",value:function(){var e=this;return new Promise((function(t,n){e.homeIconNode=v(e.homeIconPrefab),e.homeIconNode.parent=e.node;var o=e.node.getComponent(_);if(o){var r=o.getMapNodeList().getValue(5,5);e.homeIconNode.position=y(r.position.x,20,r.position.z),r.active=!1;var i=new g(e.homeIconNode);i.call((function(){r.active=!0})),i.to(2,{position:y(r.position.x,0,r.position.z)},{easing:"quadOut"}),i.call((function(){t()})),i.start()}}))}},{key:"playStatrButtonPressAnim",value:function(){var e=this;return new Promise((function(t,n){var o=e.startGameButton.getChildByName("StartGameButton").getComponent(b);if(o){var r=o.defaultClip,i=o.getState(r.name);i.repeatCount=1;var a=i.length;o.play(r.name),e.scheduleOnce((function(){console.log("播放完成"),t()}),a)}else t()}))}},{key:"playerTouch3dObject",value:function(e){"ready"===this.state.getState()?e.node.uuid==this.startGameButton.uuid&&this.state.setState("play-start-button-anim"):this.node.emit("touch-screen-to-3d",h.instance.raycastClosestResult.collider)}},{key:"update",value:function(e){}},{key:"getGameConfig",value:function(){return this.gameConfigJson}},{key:"getCurrentLevelNum",value:function(){return this.currentLevelNum}}]),t}(B),R.accY=-1,R.enemyBeLockMaxNum=1,E=n((j=D).prototype,"enemyHealthBarCtlNode",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=n(j.prototype,"gameConfigJson",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=n(j.prototype,"towersPrefabList",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),J=n(j.prototype,"startGameButton",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=n(j.prototype,"gameStartButtonBase",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=n(j.prototype,"homeIconPrefab",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=j))||L)),c._RF.pop()}}}));

System.register("chunks:///Enemys/EnemyBase.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../BaseObject.js","../util/State.js","../GameController.js"],(function(t,e){var n,a,o,s,i,r,u,c,l,h,d,m,f,v,C,y,p,g,k,b,B,S;return t({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(t){n=t.inherits,a=t.classCallCheck,o=t.possibleConstructorReturn,s=t.getPrototypeOf,i=t.createClass,r=t.get},function(t){u=t.cclegacy,c=t._decorator,l=t.Vec3,h=t.Vec2,d=t.v2,m=t.Tween,f=t.v3,v=t.SkeletalAnimationComponent,C=t.isValid,y=t.ProgressBarComponent},function(t){p=t.BaseObject},function(t){g=t.State},function(t){k=t.GameController}],execute:function(){u._RF.push({},"c8d3fW25B9NIZ69bxowfjcm","EnemyBase",void 0),S=c.ccclass,c.property,t("EnemyBase",(b=S("EnemyBase"),b(B=function(t){function e(){var t,n;a(this,e);for(var i=arguments.length,r=new Array(i),u=0;u<i;u++)r[u]=arguments[u];return(n=o(this,(t=s(e)).call.apply(t,[this].concat(r)))).pathList=[],n.state=new g,n.currentPathIndex=0,n.beLockedMaxNum=k.enemyBeLockMaxNum,n.currentbeLockedCount=0,n.cameraNode=null,n.healthBar=null,n.gameConfigJson=null,n.healthCount=0,n.currentHealthCount=0,n.endPos=null,n.startPos=null,n.enemyCtl=null,n}return n(e,t),i(e,[{key:"init",value:function(t,n,a){r(s(e.prototype),"init",this).call(this,t),this.gameConfigJson=t,this.healthCount=this.gameConfigJson[this.objectType].HealthCount,this.beLockedMaxNum=this.gameConfigJson[this.objectType].BeLockedCount,this.currentHealthCount=this.healthCount,this.endPos=a,this.startPos=n;var o=new l(this.startPos).subtract(this.endPos).normalize(),i=new h(o.x,o.z).signAngle(d(-1,0));this.node.eulerAngles=new l(0,180*i/Math.PI,0)}},{key:"showEnemyEnterAnim",value:function(t,e){var n=this,a=this.node;return this.enemyCtl=e,new Promise((function(e,o){var s=new m(a),i=a.position;s.delay(.1*t),s.set({scale:f(0,0,0)}),s.call((function(){a.active=!0})),s.to(.1,{scale:f(1,1,1)}),s.to(.4,{position:f(i.x,0,i.z)},{easing:"bounceOut"}),s.call((function(){n.startRun(),e()})),s.start()}))}},{key:"startRun",value:function(){this.state.setState("run");var t=this.rootNode.getComponent(v);if(t&&t.defaultClip){var e=t.defaultClip.name,n=t.getState(e);n.length;n.speed=this.moveSpeed*this.animSpeedMulOffset}}},{key:"onLoad",value:function(){var t=this;this.state.addState("over",(function(){t.enemyCtl.removeEnemyInList(t.node),t.node.destroy()})),this.state.addState("to-dead",(function(){var e=new m(t.node);e.by(.2,{scale:f(1,1,1)}),e.call((function(){t.state.setState("over")})),e.start()})),this.state.addState("run",(function(){var e=new m(t.node),n=new l(t.startPos).subtract(t.endPos).length()/t.moveSpeed;e.to(n,{position:t.endPos}),e.call((function(){})),e.to(.2,{scale:f(0,0,0)}),e.call((function(){t.state.setState("over")})),e.start()})),this.node.on("be-attacked",(function(e){t.currentHealthCount-=e.baseAttackNum;var n=e.baseGasNum;t.currentGasNum+=n;var a=t.currentGasNum/t.baseGasNum,o=new m(t.node);o.to(.2,{scale:f(a,a,a)}),o.start(),t.currentHealthCount<=0&&(t.currentHealthCount=0,t.state.setState("to-dead")),C(t.healthBar)&&(t.healthBar.getComponent(y).progress=t.currentHealthCount/t.healthCount)}))}},{key:"start",value:function(){}},{key:"getIsDead",value:function(){return"over"===this.state.getState()||"to-dead"===this.state.getState()}},{key:"getIsCanLock",value:function(){return this.currentbeLockedCount<this.beLockedMaxNum}},{key:"setBeLocked",value:function(t){this.currentbeLockedCount++}},{key:"unSetBeLocked",value:function(t){this.currentbeLockedCount--}},{key:"update",value:function(t){if("run"===this.state.getState()&&this.healthBar&&this.cameraNode){var e=f(0,0,0);this.cameraNode.convertToUINode(this.node.getWorldPosition(),this.healthBar.parent,e),e.y+=50,this.healthBar.setPosition(e),this.healthBar.active=!0}}}]),e}(p))||B)),u._RF.pop()}}}));

System.register("chunks:///Enemys/EnemyCube.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","./EnemyBase.js"],(function(e,t){var n,s,c,i,r,u,o,a,l,p,y,f;return e({_dec:void 0,_class:void 0}),{setters:[function(e){n=e.inherits,s=e.createClass,c=e.classCallCheck,i=e.possibleConstructorReturn,r=e.getPrototypeOf,u=e.get},function(e){o=e.cclegacy,a=e._decorator},function(e){l=e.EnemyBase}],execute:function(){o._RF.push({},"ac439Ca0GFJGrdHaYw+IQip","EnemyCube",void 0),f=a.ccclass,a.property,e("EnemyCube",(p=f("EnemCube"),p(y=function(e){function t(){return c(this,t),i(this,r(t).apply(this,arguments))}return n(t,e),s(t,[{key:"init",value:function(e,n){u(r(t.prototype),"init",this).call(this,e,n)}}]),t}(l))||y)),o._RF.pop()}}}));

System.register("chunks:///Home/HomeIcon.js",["../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(e,t){var o,n,s,c,r,u,i,l,a,p,d,f;return e({_dec:void 0,_class:void 0}),{setters:[function(e){o=e.inherits,n=e.createClass,s=e.classCallCheck,c=e.possibleConstructorReturn,r=e.getPrototypeOf},function(e){u=e.cclegacy,i=e._decorator,l=e.v3,a=e.Component}],execute:function(){u._RF.push({},"8213do7DSVI0IEO26O7s126","HomeIcon",void 0),f=i.ccclass,i.property,e("HomeIcon",(p=f("HomeIcon"),p(d=function(e){function t(){return s(this,t),c(this,r(t).apply(this,arguments))}return o(t,e),n(t,[{key:"start",value:function(){}},{key:"update",value:function(e){this.node.eulerAngles=this.node.eulerAngles.add(l(0,1,0))}}]),t}(a))||d)),u._RF.pop()}}}));

System.register("chunks:///BulletBase.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./BaseObject.js","./util/State.js","./GameController.js","./Enemys/EnemyBase.js"],(function(t,e){var n,s,i,o,a,r,c,u,l,h,d,p,m,g,f,y,v,C;return t({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(t){n=t.inherits,s=t.classCallCheck,i=t.possibleConstructorReturn,o=t.getPrototypeOf,a=t.createClass,r=t.get},function(t){c=t.cclegacy,u=t._decorator,l=t.v2,h=t.ColliderComponent,d=t.v3},function(t){p=t.BaseObject},function(t){m=t.State},function(t){g=t.GameController},function(t){f=t.EnemyBase}],execute:function(){c._RF.push({},"90e683Z9ntM7pLuSDO8IdqW","BulletBase",void 0),C=u.ccclass,u.property,t("BulletBase",(y=C("BulletBase"),y(v=function(t){function e(){var t,n;s(this,e);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=i(this,(t=o(e)).call.apply(t,[this].concat(r)))).state=new m,n.speedY=0,n.accY=g.accY,n.currentDirection=l(0,0),n.currentInitSpeedY=6,n.currentCostAcc=-3,n.maxLeftTime=1+Math.random(),n.colliderComponent=null,n.baseAttackNum=0,n.gameConfigJson={},n}return n(e,t),a(e,[{key:"onLoad",value:function(){this.state.addState("sleep",(function(){}))}},{key:"init",value:function(t,n){var s=this;r(o(e.prototype),"init",this).call(this,t);var i=n.direction;this.currentDirection=i;var a=n.targetEnemy;this.node.lookAt(a.position),this.gameConfigJson=t,this.baseAttackNum=this.gameConfigJson[this.objectType].BaseAttackNum,this.state.setState("run");this.node.getPosition().y,this.accY;this.colliderComponent=this.node.getComponent(h),this.colliderComponent.on("onTriggerEnter",this.onTriggerEnter.bind(this)),this.scheduleOnce((function(){s.node.destroy()}),this.maxLeftTime)}},{key:"onTriggerEnter",value:function(t){var e=t.otherCollider;e&&e.getComponent(f)&&!e.getComponent(f).getIsDead()&&(e.node.emit("be-attacked",{baseAttackNum:this.baseAttackNum,baseGasNum:this.baseGasNum}),0!==this.baseGasNum&&this.node.destroy())}},{key:"start",value:function(){}},{key:"update",value:function(t){if("run"===this.state.getState()){this.speedY+=this.accY*t;var e=this.node.position,n=e.y+this.speedY*t,s=this.currentDirection.normalize().multiplyScalar(this.moveSpeed*t);this.node.setPosition(d(e.x+s.x,n,e.z+s.y)),this.node.getPosition().y<=0&&this.isCollisionGround&&(this.speedY=this.currentInitSpeedY,this.currentInitSpeedY+=this.currentCostAcc,this.currentInitSpeedY<0&&this.state.setState("sleep"))}}}]),e}(p))||v)),c._RF.pop()}}}));

System.register("chunks:///Towers/TowerBase.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../BaseObject.js","../util/State.js","../EnemyController.js","../GameController.js","../Enemys/EnemyBase.js","../BulletBase.js"],(function(t,e){var n,o,r,i,a,s,l,u,c,h,m,g,f,p,d,y,v,C,T,b,E,S,B,k,w,P,_,j,D,O,R,z,A,G,I,L;return t({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_temp:void 0}),{setters:[function(t){n=t.applyDecoratedDescriptor,o=t.inherits,r=t.classCallCheck,i=t.possibleConstructorReturn,a=t.getPrototypeOf,s=t.initializerDefineProperty,l=t.assertThisInitialized,u=t.createClass},function(t){c=t.cclegacy,h=t._decorator,m=t.Prefab,g=t.Node,f=t.CCFloat,p=t.v2,d=t.find,y=t.isValid,v=t.Vec3,C=t.SkeletalAnimationComponent,T=t.instantiate},function(t){b=t.BaseObject},function(t){E=t.State},function(t){S=t.EnemyController},function(t){B=t.GameController},function(t){k=t.EnemyBase},function(t){w=t.BulletBase}],execute:function(){c._RF.push({},"93965WLO/1GpoRxL0uoTS9a","TowerBase",void 0),I=h.ccclass,L=h.property,t("TowerBase",(P=I("TowerBase"),_=L({type:m}),j=L({type:g}),D=L({type:f}),P((z=n((R=function(t){function e(){var t,n;r(this,e);for(var o=arguments.length,u=new Array(o),c=0;c<o;c++)u[c]=arguments[c];return(n=i(this,(t=a(e)).call.apply(t,[this].concat(u)))).gameController=null,n.state=new E,n.currentTargetEnemy=null,n.currentShootTime=0,n.shootDuraction=1,s(n,"bulletPrefab",z,l(n)),s(n,"bulletStartPos",A,l(n)),n.bulletMoveTime=null,n.currentShootDiraction=p(0,0),n.attackRate=null,n.gameConfig=null,s(n,"attackAnimEventTimeOffset",G,l(n)),n}return o(e,t),u(e,[{key:"init",value:function(){}},{key:"start",value:function(){var t=this;this.state.setState("run");this.bulletStartPos.worldPosition.y,B.accY;this.gameController=d("GameController"),this.gameConfig=this.gameController.getComponent(B).getGameConfig().json;var e=this.gameConfig[this.objectType].ShootRate;this.attackRate=e,this.shootDuraction=1/e,this.gameController.on("touch-screen-to-3d",(function(e){e.node&&e.node.uuid===t.node.uuid&&t.gameController.emit("touch-tower",t.node)}))}},{key:"update",value:function(t){if("run"===this.state.getState()){if(null===this.currentTargetEnemy){for(var e=this.gameController.getComponent(S).getCurrentEnemyNodeList(),n=1e4,o=0;o<e.length;o++){var r=e[o];if(y(r)&&r.getComponent(k).getIsCanLock()&&!r.getComponent(k).getIsDead()){var i=new v(r.position).subtract(this.node.position).length();i<n&&(n=i,this.currentTargetEnemy=r)}}this.currentTargetEnemy&&this.currentTargetEnemy.getComponent(k).setBeLocked(this.node)}if(this.currentTargetEnemy)if(this.currentTargetEnemy.getComponent(k).getIsDead())this.currentTargetEnemy=null;else{this.currentShootDiraction=p(this.currentTargetEnemy.position.x,this.currentTargetEnemy.position.z).subtract(p(this.node.position.x,this.node.position.z));var a=this.currentShootDiraction.signAngle(p(0,-1));this.node.eulerAngles=new v(0,180*a/Math.PI,0)}this.currentTargetEnemy&&(this.currentShootTime>this.shootDuraction?(this.currentShootTime=0,this.shootOneBullet()):this.currentShootTime+=t)}}},{key:"shootOneBullet",value:function(){var t=this,e=this.rootNode.getComponent(C);if(e){var n=e.defaultClip.name,o=e.getState(n),r=1*o.length/this.attackRate;e.play(n),o.repeatCount=1,this.scheduleOnce((function(){if(y(t.currentTargetEnemy)){var e=T(t.bulletPrefab);e.parent=t.node.parent,e.active=!1,e.setPosition(t.bulletStartPos.worldPosition),e.active=!0,e.getComponent(w).init(t.gameConfig,{direction:t.currentShootDiraction,targetEnemy:t.currentTargetEnemy})}}),r*this.attackAnimEventTimeOffset)}}}]),e}(b)).prototype,"bulletPrefab",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=n(R.prototype,"bulletStartPos",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=n(R.prototype,"attackAnimEventTimeOffset",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),O=R))||O)),c._RF.pop()}}}));

System.register("chunks:///UI/EnemyHealthBarCtl.js",["../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(e,t){var n,r,a,o,i,l,c,u,s,p,d,y,f,m,v,h,_,C,b,B,g,H;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_temp:void 0}),{setters:[function(e){n=e.applyDecoratedDescriptor,r=e.inherits,a=e.classCallCheck,o=e.possibleConstructorReturn,i=e.getPrototypeOf,l=e.initializerDefineProperty,c=e.assertThisInitialized,u=e.createClass},function(e){s=e.cclegacy,p=e._decorator,d=e.Prefab,y=e.CameraComponent,f=e.Component}],execute:function(){s._RF.push({},"6dc3cXIfPpCN6tR8iLaqvBX","EnemyHealthBarCtl",void 0),g=p.ccclass,H=p.property,e("EnemyHealthBarCtl",(m=g("EnemyHealthBarCtl"),v=H({type:d}),h=H({type:y}),m((b=n((C=function(e){function t(){var e,n;a(this,t);for(var r=arguments.length,u=new Array(r),s=0;s<r;s++)u[s]=arguments[s];return n=o(this,(e=i(t)).call.apply(e,[this].concat(u))),l(n,"enemyHealthBarPrefab",b,c(n)),l(n,"cameraNode",B,c(n)),n}return r(t,e),u(t,[{key:"onLoad",value:function(){this.node.on("add-one-enemy",(function(e){})),this.node.on("remove-one-enemy",(function(){}))}},{key:"start",value:function(){}},{key:"update",value:function(e){}}]),t}(f)).prototype,"enemyHealthBarPrefab",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=n(C.prototype,"cameraNode",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=C))||_)),s._RF.pop()}}}));

System.register("chunks:///UI/Menu/MenuUIBase.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc","../../util/State.js"],(function(e,t){var n,o,s,a,i,c,l,u,r,h,p,d,v,f;return e({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(e){n=e.inherits,o=e.classCallCheck,s=e.possibleConstructorReturn,a=e.getPrototypeOf,i=e.createClass},function(e){c=e.cclegacy,l=e._decorator,u=e.Tween,r=e.v3,h=e.Component},function(e){p=e.State}],execute:function(){c._RF.push({},"22840YoTAVEEoGWokYeLlSX","MenuUIBase",void 0),f=l.ccclass,l.property,e("MenuUIBase",(d=f("MenuUIBase"),d(v=function(e){function t(){var e,n;o(this,t);for(var i=arguments.length,c=new Array(i),l=0;l<i;l++)c[l]=arguments[l];return(n=s(this,(e=a(t)).call.apply(e,[this].concat(c)))).state=new p,n.targetNode=null,n}return n(t,e),i(t,[{key:"start",value:function(){console.log("menu ui base"),this.state.addState("open-ui",this.openUI.bind(this)),this.state.addState("close-ui",this.closeUI.bind(this))}},{key:"open",value:function(e){console.log("打开"),this.targetNode=e,this.state.setState("open-ui")}},{key:"closeUI",value:function(){var e=new u(this.node);e.to(.2,{scale:r(0,0,0)}),e.call((function(){})),e.start()}},{key:"openUI",value:function(){console.log("open ui"),this.node.active=!0;var e=new u(this.node);e.to(.2,{scale:r(1,1,1)}),e.call((function(){})),e.start()}}]),t}(h))||v)),c._RF.pop()}}}));

System.register("chunks:///UI/Menu/BuildTowerUI.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc","../../GameController.js","./MenuUIBase.js"],(function(e,t){var o,i,n,r,a,l,s,c,u,d,h,p,v,f,m,g,w,C,y,B,b,_,P,k,I,T;return e({_dec:void 0,_dec2:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_temp:void 0}),{setters:[function(e){o=e.applyDecoratedDescriptor,i=e.inherits,n=e.classCallCheck,r=e.possibleConstructorReturn,a=e.getPrototypeOf,l=e.initializerDefineProperty,s=e.assertThisInitialized,c=e.createClass,u=e.get},function(e){d=e.cclegacy,h=e._decorator,p=e.Prefab,v=e.find,f=e.instantiate,m=e.ButtonComponent,g=e.v3,w=e.v2},function(e){C=e.GameController},function(e){y=e.MenuUIBase}],execute:function(){d._RF.push({},"e6405P/+GFGaa0/qmo/iQAc","BuildTowerUI",void 0),I=h.ccclass,T=h.property,e("BuildTowerUI",(B=I("BuildTowerUI"),b=T({type:p}),B((k=o((P=function(e){function t(){var e,o;n(this,t);for(var i=arguments.length,c=new Array(i),u=0;u<i;u++)c[u]=arguments[u];return o=r(this,(e=a(t)).call.apply(e,[this].concat(c))),l(o,"towerShowAnimPrefabList",k,s(o)),o}return i(t,e),c(t,[{key:"start",value:function(){for(var e=v("GameController").getComponent(C),o=e.getCurrentLevelNum(),i=e.getGameConfig().json["Level_"+o].ActivedTower,n=i.length,r=0;r<n;r++){var l=f(this.towerShowAnimPrefabList[i[r]]);l.name="tower_"+i[r],l.addComponent(m),l.on("click",this.onButtonClick.bind(this)),l.parent=this.node;var s=76/l.width;l.scale=g(s,s,1);var c=w(0,1),d=(c=c.rotate(2*Math.PI/n*r).normalize()).multiplyScalar(100);l.setPosition(g(d.x,d.y,0))}console.log("build tower ui"),u(a(t.prototype),"start",this).call(this),this.node.getChildByName("BuildTowerBgNode").on("click",this.onButtonClick.bind(this))}},{key:"onButtonClick",value:function(e,t){var o=e.node.name;if("BuildTowerBgNode"===o)this.state.setState("close-ui");else{var i=o.substring(o.length-1,o.length);console.log("index",i),this.state.setState("close-ui"),v("GameController").emit("build-one-tower",i,this.targetNode)}}}]),t}(y)).prototype,"towerShowAnimPrefabList",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_=P))||_)),d._RF.pop()}}}));

System.register("chunks:///UI/Menu/UpdateTowerUI.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(e,t){var r,n,o,s,c,u,i,a,l,p,U;return e({_dec:void 0,_class:void 0}),{setters:[function(e){r=e.inherits,n=e.createClass,o=e.classCallCheck,s=e.possibleConstructorReturn,c=e.getPrototypeOf},function(e){u=e.cclegacy,i=e._decorator,a=e.Component}],execute:function(){u._RF.push({},"18715njxPNA9Ie4NOUMTb2f","UpdateTowerUI",void 0),U=i.ccclass,i.property,e("UpdateTowerUI",(l=U("UpdateTowerUI"),l(p=function(e){function t(){return o(this,t),s(this,c(t).apply(this,arguments))}return r(t,e),n(t,[{key:"start",value:function(){}}]),t}(a))||p)),u._RF.pop()}}}));

System.register("chunks:///UI/TouchScreenLayer.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../GameController.js"],(function(e,t){var o,n,r,c,a,s,l,i,u,p,y,C,m,h,d,g;return e({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(e){o=e.inherits,n=e.classCallCheck,r=e.possibleConstructorReturn,c=e.getPrototypeOf,a=e.createClass},function(e){s=e.cclegacy,l=e._decorator,i=e.find,u=e.CameraComponent,p=e.Node,y=e.PhysicsSystem,C=e.Component},function(e){m=e.GameController}],execute:function(){s._RF.push({},"5c5e3+MsMZDYpvgjM8gmHSO","TouchScreenLayer",void 0),g=l.ccclass,l.property,e("TouchScreenLayer",(h=g("TouchScreenLayer"),h(d=function(e){function t(){var e,o;n(this,t);for(var a=arguments.length,s=new Array(a),l=0;l<a;l++)s[l]=arguments[l];return(o=r(this,(e=c(t)).call.apply(e,[this].concat(s)))).cameraNode=null,o.gameCtl=null,o}return o(t,e),a(t,[{key:"start",value:function(){var e=this;this.cameraNode=i("Camera").getComponent(u),this.gameCtl=i("GameController"),this.node.on(p.EventType.TOUCH_START,(function(t){console.log("touch start",t.getLocation());var o=t.getLocation(),n=e.cameraNode.getComponent(u).screenPointToRay(o.x,o.y);y.instance.raycastClosest(n,1,1e4,!0),y.instance.raycastClosestResult.collider&&i("GameController").getComponent(m).playerTouch3dObject(y.instance.raycastClosestResult.collider)}))}},{key:"update",value:function(e){}}]),t}(C))||d)),s._RF.pop()}}}));

System.register("chunks:///UI/UIController.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","./Menu/MenuUIBase.js"],(function(e,o){var t,r,n,i,a,l,u,d,c,s,p,b,f,v,m,g,I,y,C,N,U,h,_,P,w,T,k,z,M,B,D,L,W;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_dec6:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_temp:void 0}),{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inherits,n=e.classCallCheck,i=e.possibleConstructorReturn,a=e.getPrototypeOf,l=e.initializerDefineProperty,u=e.assertThisInitialized,d=e.createClass},function(e){c=e.cclegacy,s=e._decorator,p=e.Node,b=e.Prefab,f=e.isValid,v=e.instantiate,m=e.LabelComponent,g=e.CameraComponent,I=e.Component},function(e){y=e.MenuUIBase}],execute:function(){c._RF.push({},"ac456IJb4BOS7ZW+hoJsDui","UIController",void 0),L=s.ccclass,W=s.property,e("UIController",(C=L("UIController"),N=W({type:p}),U=W({type:b}),h=W({type:b}),_=W({type:p}),P=W({type:p}),C((k=t((T=function(e){function o(){var e,t;n(this,o);for(var r=arguments.length,d=new Array(r),c=0;c<r;c++)d[c]=arguments[c];return t=i(this,(e=a(o)).call.apply(e,[this].concat(d))),l(t,"gameController",k,u(t)),l(t,"buildTowerPrefab",z,u(t)),l(t,"updateMenuPrefab",M,u(t)),l(t,"cameraNode",B,u(t)),t.buildUINode=null,t.updateUINode=null,l(t,"currentWaveLabelNode",D,u(t)),t}return r(o,e),d(o,[{key:"start",value:function(){var e=this;this.gameController.on("touch-base-build-base",(function(o){f(e.buildUINode)||(e.buildUINode=v(e.buildTowerPrefab),e.buildUINode.parent=e.node),e.setUINodeTo3dPos(e.buildUINode,o),e.buildUINode.getComponent(y).open(o)})),this.gameController.on("touch-tower",(function(o){f(e.updateUINode)||(e.updateUINode=v(e.updateMenuPrefab),e.updateUINode.parent=e.node),e.setUINodeTo3dPos(e.updateUINode,o)})),this.gameController.on("refer-current-wave",(function(o){e.currentWaveLabelNode.getComponent(m).string=o}))}},{key:"setUINodeTo3dPos",value:function(e,o){var t;t=this.cameraNode.getComponent(g).convertToUINode(o.position,this.node),e.setPosition(t)}},{key:"onButtonClick",value:function(e,o){switch(o){case"start-game":console.log("event",e),e.target.destroy(),this.gameController.emit("player-click-game")}}}]),o}(I)).prototype,"gameController",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(T.prototype,"buildTowerPrefab",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(T.prototype,"updateMenuPrefab",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(T.prototype,"cameraNode",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(T.prototype,"currentWaveLabelNode",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=T))||w)),c._RF.pop()}}}));

System.register("chunks:///_virtual/prerequisite-imports:main",["../BaseObject.js","../util/State.js","../TowerBuildBase/TowerBuildBase.js","../util/My2Array.js","../GroundTiled/GroundTiled.js","../GroundMapCtl.js","../EnemyController.js","../TowerBuildBaseCtl.js","../GameController.js","../Enemys/EnemyBase.js","../Enemys/EnemyCube.js","../Home/HomeIcon.js","../BulletBase.js","../Towers/TowerBase.js","../UI/EnemyHealthBarCtl.js","../UI/Menu/MenuUIBase.js","../UI/Menu/BuildTowerUI.js","../UI/Menu/UpdateTowerUI.js","../UI/TouchScreenLayer.js","../UI/UIController.js"],(function(n,e){return{setters:[function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){}],execute:function(){}}}));

(function(r) {
  r('project:///assets/Scripts/BaseObject.js', 'chunks:///BaseObject.js');
  r('project:///assets/Scripts/util/State.js', 'chunks:///util/State.js');
  r('project:///assets/Scripts/TowerBuildBase/TowerBuildBase.js', 'chunks:///TowerBuildBase/TowerBuildBase.js');
  r('project:///assets/Scripts/util/My2Array.js', 'chunks:///util/My2Array.js');
  r('project:///assets/Scripts/GroundTiled/GroundTiled.js', 'chunks:///GroundTiled/GroundTiled.js');
  r('project:///assets/Scripts/GroundMapCtl.js', 'chunks:///GroundMapCtl.js');
  r('project:///assets/Scripts/EnemyController.js', 'chunks:///EnemyController.js');
  r('project:///assets/Scripts/TowerBuildBaseCtl.js', 'chunks:///TowerBuildBaseCtl.js');
  r('project:///assets/Scripts/GameController.js', 'chunks:///GameController.js');
  r('project:///assets/Scripts/Enemys/EnemyBase.js', 'chunks:///Enemys/EnemyBase.js');
  r('project:///assets/Scripts/Enemys/EnemyCube.js', 'chunks:///Enemys/EnemyCube.js');
  r('project:///assets/Scripts/Home/HomeIcon.js', 'chunks:///Home/HomeIcon.js');
  r('project:///assets/Scripts/BulletBase.js', 'chunks:///BulletBase.js');
  r('project:///assets/Scripts/Towers/TowerBase.js', 'chunks:///Towers/TowerBase.js');
  r('project:///assets/Scripts/UI/EnemyHealthBarCtl.js', 'chunks:///UI/EnemyHealthBarCtl.js');
  r('project:///assets/Scripts/UI/Menu/MenuUIBase.js', 'chunks:///UI/Menu/MenuUIBase.js');
  r('project:///assets/Scripts/UI/Menu/BuildTowerUI.js', 'chunks:///UI/Menu/BuildTowerUI.js');
  r('project:///assets/Scripts/UI/Menu/UpdateTowerUI.js', 'chunks:///UI/Menu/UpdateTowerUI.js');
  r('project:///assets/Scripts/UI/TouchScreenLayer.js', 'chunks:///UI/TouchScreenLayer.js');
  r('project:///assets/Scripts/UI/UIController.js', 'chunks:///UI/UIController.js');
  r('virtual:///prerequisite-imports:main', 'chunks:///_virtual/prerequisite-imports:main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    var _m;
    return {
        setters: [function(m) { _m = m; }],
        execute: function () { _export(_m); }
    };
    });
});